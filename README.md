# Maze Game

Игра-лабиринт на C# с использованием Avalonia UI. Генерация случайного лабиринта, и его прохождение кубиком с помощью клавиатуры.

## Особенности

- **Генерация лабиринтов**: Алгоритм на основе рекурсивного обхода в глубину (DFS)
- **Настраиваемые параметры**: Ширина, высота и seed для воспроизводимости
- **Интуитивное управление**: Стрелки или WASD для перемещения
- **Визуальная обратная связь**: Цветовая индикация старта, финиша и позиции игрока
- **Unit-тесты**: Покрытие тестами логики генерации и движения

## Требования

- [.NET 9.0 SDK](https://dotnet.microsoft.com/download/dotnet/9.0) или выше
- Операционная система: Windows, Linux-based или macOS

## Установка и запуск
Для **Linux-based** системах

1. **Установите .dotnet 9.0**
   ```bash
   sudo pacman -S dotnet-sdk-9.0 #arch-based
   ```
   или другие менеджеры пакетов (зависит от дистрибутива)
   ```bash
   sudo apt install dotnet-sdk-9.0 #debian-based
   ```

3. **Клонируйте репозиторий** (или откройте проект):
   ```bash
   git clone https://github.com/DarkUser1onion/MazeGame.git
   cd MazeGame
   ```

4. **Восстановите зависимости**:
   ```bash
   dotnet restore
   ```

5. **Запустите игру**:
   ```bash
   dotnet run --project MazeGame/MazeGame.csproj
   ```

   Или соберите и запустите исполняемый файл:
   ```bash
   dotnet build MazeGame/MazeGame.csproj -c Release
   ./MazeGame/bin/Release/net9.0/MazeGame
   ```

## Как играть

1. **Настройте параметры лабиринта**:
   - **Ширина**: от 5 до 60 клеток
   - **Высота**: от 5 до 60 клеток
   - **Seed** (опционально): число для генерации конкретного лабиринта

2. **Нажмите "Сгенерировать"** для создания нового лабиринта

3. **Управляйте персонажем**:
   - **Стрелки** или **WASD** для перемещения
   - Цель — добраться до правого нижнего угла (красный квадрат)
   - Стартовая позиция — левый верхний угол (зелёный квадрат)

4. **Пройдите лабиринт**:
   - Синий квадрат показывает вашу текущую позицию
   - Белые линии — стены лабиринта
   - При достижении финиша появится сообщение о победе

## Структура проекта

```
MazeGame/
├── MazeGame/                    # Основной проект
│   ├── Models/
│   │   └── Maze.cs             # Модель лабиринта с логикой стен
│   ├── Services/
│   │   └── MazeGenerator.cs    # Генератор лабиринтов (DFS алгоритм)
│   ├── Controls/
│   │   └── MazeView.cs         # Кастомный контрол для отрисовки
│   ├── MainWindow.axaml        # UI главного окна
│   ├── MainWindow.axaml.cs     # Логика главного окна и управления
│   └── Program.cs              # Точка входа приложения
├── MazeGame.Tests/             # Тестовый проект
│   └── UnitTest1.cs            # Unit-тесты для логики лабиринта
└── README.md                   # Этот файл
```

## Тестирование

Запуск всех тестов:
```bash
dotnet test
```

Тесты проверяют:
- **Генерация лабиринта**: Все клетки достижимы из стартовой позиции
- **Логика движения**: Корректная проверка стен и границ

## Технологии

- **.NET 9.0**: Платформа разработки
- **Avalonia UI 11.2.7**: Кроссплатформенный UI фреймворк
- **xUnit**: Фреймворк для unit-тестирования
- **Git** (по ssh ключу): удобная система для управления разных версий программы

## Алгоритм генерации

Лабиринт генерируется с помощью алгоритма **рекурсивного обхода в глубину** (DFS):

1. Начинаем с начальной клетки (0, 0)
2. Отмечаем её как посещённую
3. Выбираем случайного непосещённого соседа
4. Удаляем стену между текущей и выбранной клеткой
5. Рекурсивно продолжаем с новой клетки
6. При отсутствии непосещённых соседей возвращаемся назад (backtracking)

Результат: гарантированно связный лабиринт без циклов, где каждая клетка достижима из любой другой.

## Настройка внешнего вида

В `MainWindow.axaml` можно настроить:
- Цвета старта и финиша (`StartBrush`, `FinishBrush`)
- Цвет игрока (в `MazeView.cs` — `Brushes.DeepSkyBlue`)
- Толщину стен (`WallThickness`)
- Цвет фона и общий стиль интерфейса

---

## Лицензия

Этот проект создан в образовательных целях.
Но было бы приятно, если при изменении моего проекта, вы будете указывать мое авторство!

